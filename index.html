<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LFE IUB Digital Album | Rajshahi BLC</title>

<!-- Bootstrap -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

<!-- Icons -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

<!-- Font -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#f8fafc;
  --card:#ffffff;
  --text:#0f172a;
  --muted:#64748b;
  --border:#e2e8f0;

  /* IUB Colors */
  --iub1:#003A8F;
  --iub2:#0057B8;
  --iub3:#2F80ED;
}
[data-theme="dark"]{
  --bg:#020617;
  --card:#0f172a;
  --text:#e5e7eb;
  --muted:#94a3b8;
  --border:#1e293b;
}

body{
  font-family:'Inter',sans-serif;
  background:var(--bg);
  color:var(--text);
  transition:.3s;
}

.navbar{
  background:var(--card)!important;
  border-bottom:1px solid var(--border);
}

.iub-logo{
  width:48px;
  height:auto;
  margin-right:10px;
  animation:logoFloat 4s ease-in-out infinite;
  filter:drop-shadow(0 0 6px rgba(0,58,143,.35));
}

.brand-text{
  font-size:22px;
  font-weight:800;
  background:linear-gradient(
    90deg,
    var(--iub1),
    var(--iub2),
    var(--iub3),
    var(--iub2)
  );
  background-size:300%;
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  animation:iubGradient 6s ease infinite;
}

@keyframes iubGradient{
  0%{background-position:0%}
  50%{background-position:100%}
  100%{background-position:0%}
}
@keyframes logoFloat{
  0%,100%{transform:translateY(0)}
  50%{transform:translateY(-6px)}
}

.theme-toggle i{
  transition:transform .4s ease;
}
[data-theme="dark"] .theme-toggle i{
  transform:rotate(180deg);
}

.card{
  background:var(--card);
  border:1px solid var(--border);
  transition:.3s;
}
.card:hover{
  transform:translateY(-5px);
  box-shadow:0 12px 25px rgba(0,0,0,.1);
}

.card-img-top{
  height:180px;
  object-fit:cover;
}

textarea{
  background:var(--bg);
  color:var(--text);
  border:1px solid var(--border);
}

footer{
  background:var(--card);
  border-top:1px solid var(--border);
  color:var(--muted);
}
</style>
</head>

<body>

<!-- NAVBAR -->
<nav class="navbar">
  <div class="container d-flex justify-content-between align-items-center">
    <div class="d-flex align-items-center">
      <img
        src="https://iub.ac.bd/_next/image?url=https%3A%2F%2Fiub.ac.bd%2Fmedia-backend%2Fmedia%2Fiub-logo_2024_color-c303e48f-7406-4c63-8e53-51fb791b2167.png&w=256&q=75"
        class="iub-logo"
        alt="IUB Logo"
      >
      <div>
        <span class="brand-text">LFE IUB Digital Album</span><br>
        <small style="font-weight:600;color:var(--iub2)">Group-17 | Rajshahi BLC</small>
      </div>
    </div>

    <button class="btn theme-toggle" onclick="toggleTheme()">
      <i class="bi bi-moon-stars-fill fs-5"></i>
    </button>
  </div>
</nav>

<!-- MAIN -->
<div class="container my-4">

  <!-- Upload -->
  <div class="card mb-4">
    <div class="card-body d-flex flex-wrap justify-content-between align-items-center gap-3">
      <h5 class="mb-0 fw-semibold">Upload Photos & Memories</h5>
      <input type="file" id="upload" multiple accept="image/*">
    </div>
  </div>

  <!-- Gallery -->
  <div class="row g-4" id="gallery"></div>

</div>

<!-- FOOTER -->
<footer class="text-center py-3">
  Â© 2026 Independent University, Bangladesh | Rajshahi BLC
</footer>

<!-- Image Modal -->
<div class="modal fade" id="imageModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content bg-transparent border-0">
      <img id="modalImg" class="img-fluid rounded">
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
/* AUTO SYSTEM THEME */
const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
document.documentElement.setAttribute(
  'data-theme',
  localStorage.theme || (prefersDark ? 'dark' : 'light')
);

function toggleTheme(){
  const theme =
    document.documentElement.getAttribute('data-theme') === 'dark'
      ? 'light' : 'dark';
  document.documentElement.setAttribute('data-theme', theme);
  localStorage.theme = theme;
}

/* ALBUM + AUTO SAVE */
const upload = document.getElementById('upload');
const gallery = document.getElementById('gallery');
const modalImg = document.getElementById('modalImg');
const modal = new bootstrap.Modal(document.getElementById('imageModal'));

// Load from localStorage
function loadGallery(){
  const data = localStorage.getItem('iub_album');
  if(data) gallery.innerHTML = data;

  // Reattach textarea input for auto-save
  document.querySelectorAll('#gallery textarea').forEach(t=>{
    t.addEventListener('input', saveGallery);
  });
}
loadGallery();

// Save gallery to localStorage
function saveGallery(){
  localStorage.setItem('iub_album', gallery.innerHTML);
}

upload.onchange = () => {
  [...upload.files].forEach(file=>{
    const r = new FileReader();
    r.onload = e=>{
      const cardHTML = `
      <div class="col-lg-4 col-md-6">
        <div class="card h-100">
          <img src="${e.target.result}" class="card-img-top" onclick="openModal(this.src)">
          <div class="card-body">
            <textarea class="form-control mb-2" rows="2" placeholder="Write description..."></textarea>
            <div class="d-flex gap-2">
              <button class="btn btn-outline-primary w-100">Edit</button>
              <button class="btn btn-outline-danger w-100 remove-btn">Delete</button>
            </div>
          </div>
        </div>
      </div>`;
      gallery.insertAdjacentHTML('beforeend', cardHTML);
      saveGallery();

      // Attach auto-save to textarea
      gallery.querySelectorAll('textarea').forEach(t=>{
        t.addEventListener('input', saveGallery);
      });

      // Attach delete
      gallery.querySelectorAll('.remove-btn').forEach(btn=>{
        btn.onclick = () => { btn.closest('.col-lg-4').remove(); saveGallery(); }
      });
    }
    r.readAsDataURL(file);
  });
};

function openModal(src){
  modalImg.src = src;
  modal.show();
}
</script>

</body>
</html>
